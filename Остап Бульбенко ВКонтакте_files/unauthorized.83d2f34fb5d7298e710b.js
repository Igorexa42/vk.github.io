(self.webpackChunkvk=self.webpackChunkvk||[]).push([[1357],{64871:function(e,n,t){"use strict";t.d(n,{UnauthorizedActionModal:function(){return c}});var i=t(62641),o=t(85703),s=t(81294),a=t(52822),r=t(93156);var d=t(95759);function c(e={}){var n,t=e.loginUrl||"/login",c=e.joinUrl||"/join",l=e.showOpenInApp,u=e.openInAppUrl,_={more:{title:(0,i.getLang)("mobile_unauthorized_action_more_title"),description:(0,i.getLang)("mobile_unauthorized_action_more_description")},like:{title:(0,i.getLang)("mobile_unauthorized_action_like_title"),description:(0,i.getLang)("mobile_unauthorized_action_like_description")},share:{title:(0,i.getLang)("mobile_unauthorized_action_share_title"),description:(0,i.getLang)("mobile_unauthorized_action_share_description")}};n=e.title||e.description?{title:e.title,description:e.description}:_[e.type];var v,h=e.iconType,g=e.iconUrl;if(h||(h="like"===e.type?"like":"share"===e.type?"share":"vk"),g)v=(0,d.Avatar)({size:72,src:g,borderRadius:"full"});else switch(h){case"vk":v=(0,r.Icon56LogoVk)();break;case"like":v=(0,r.Icon56LikeOutline)();break;case"share":v=(0,r.Icon56ShareOutline)();break;case"photo":v=(0,r.Icon56GalleryOutline)();break;case"video":v=(0,r.Icon56VideoOutline)();break;case"music":v=(0,r.Icon56MusicOutline)();break;case"add_user":v=(0,r.Icon56UserAddOutline)();break;case"community":v=(0,a.default)({icon:{icon:'<svg height="56" viewBox="0 0 56 56" width="56" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z"/><path d="M28 29c7.07 0 13 2.85 13 9 0 3.06-1.85 5-4.37 5H19.38C16.76 43 15 41.57 15 38.5c0-6.53 5.85-9.5 13-9.5zm-14.44 0a1.5 1.5 0 0 1 .03 3C9.7 32.22 7 33.98 7 37c0 .75.33 1 1 1h2.64a1.5 1.5 0 0 1-.14 3H7.8C5.72 40.92 4 39.55 4 37c0-5 4.15-7.69 9.41-8zm28.88 0h.15c5.26.31 9.41 3 9.41 8 0 2.55-1.72 3.92-3.8 4h-2.7a1.5 1.5 0 0 1-.14-3H48c.67 0 1-.25 1-1 0-3.02-2.7-4.78-6.59-5a1.5 1.5 0 0 1 .03-3zM28 32c-5.71 0-10 2.18-10 6.5 0 1.15.25 1.45 1.11 1.5h17.52c.83 0 1.37-.56 1.37-2 0-3.9-4.38-6-10-6zM16 12c.21 0 .42 0 .63.03a1.5 1.5 0 0 1-.27 2.99 4 4 0 1 0 .71 7.84l.16-.04a1.5 1.5 0 0 1 .68 2.92l-.35.08-.32.07A7 7 0 1 1 16 12zm24 0a7 7 0 1 1-1.23 13.9l-.33-.08-.35-.08a1.5 1.5 0 0 1 .68-2.92l.16.03A3.96 3.96 0 0 0 40 23a4 4 0 1 0-.36-7.98 1.5 1.5 0 1 1-.27-3L40 12zm-12-2a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm0 3a5 5 0 1 0 0 10 5 5 0 0 0 0-10z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"users_3_outline_56"}});break;case"message":v=(0,r.Icon56MessageOutline)()}var m=`modal_${e.type}`||"unknown";e.isCTA&&(m="cta");var p,k=e.isUnauthorizedFeed,w=null,f=null;if(e.onLoginClick?w=e.onLoginClick:k&&(w="UnauthorizedFeed.onActionClick(event)"),e.onJoinClick?f=e.onJoinClick:k&&(w="UnauthorizedFeed.onActionClick(event)"),l){var I=`${(0,i.getLang)("unauthorized_box_sign_in_or_sign_up")}`;I=(0,i.langTag)(`<a class="UnauthorizedActionModal__signInTextLink" href="${t}">`,"</a>",I,"link_sign_in"),I=(0,i.langTag)(`<a class="UnauthorizedActionModal__signUpTextLink" href="${c}">`,"</a>",I,"link_sign_up"),p={inner:[(0,s.default)({inner:[(0,i.getLang)("mobile_open_in_native_app_float_btn")],class:"UnauthorizedActionModal__openInAppButton",url:u,use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),{inner:[Wd.wrap(I)],class:"UnauthorizedActionModal__openInAppFooterText",tag:"div"}],class:"UnauthorizedActionModal__openInAppFooter",tag:"div"}}else p=(0,o.BtnStack)({inner:[(0,s.default)({inner:[(0,i.getLang)("mobile_unauthorized_login")],url:t,onClick:w,attrs:{"data-type":"login","data-from":`${m}`},use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),(0,s.default)({inner:[(0,i.getLang)("mobile_unauthorized_join")],url:c,onClick:f,attrs:{"data-type":"join","data-from":`${m}`},use_native_onclick:!0,stretch:!0,theme:"positive",size:"large"})],mode:"vertical"});return{inner:[{inner:[{inner:[v],class:"UnauthorizedActionModal__icon",tag:"div"},{inner:[n.title],class:"UnauthorizedActionModal__title",tag:"div"},{inner:[n.description],class:"UnauthorizedActionModal__description",tag:"div"},p],class:"UnauthorizedActionModal__in",tag:"div"}],class:(0,i.classNames)("UnauthorizedActionModal","UnauthorizedActionModal--"+e.type,e.className),tag:"div"}}},36820:function(e,n,t){"use strict";var i={};t.r(i),t.d(i,{deleteUser:function(){return M},expandRows:function(){return V},init:function(){return C},onMenuClick:function(){return y},onRowClick:function(){return T}});var o=t(47023),s=t(11911),a=t(55971),r=t(61540);const d=(0,t(19331).partConfigEnabled)("vkc_app_detection_enabled")&&(0,a.isInstalledRelatedAppsSupported)()&&Boolean(document.querySelector("link[rel=manifest]"))&&"vk.ru"!==(0,r.getHostName)(),c=()=>{const e=document.querySelector(".installApp__link--hidden");e&&e.classList.remove("installApp__link--hidden");const n=document.querySelector(".installApp--desktopHidden");n&&n.classList.remove("installApp--desktopHidden")},l=()=>{const e=document.querySelector("#vkidform__signin a");e&&e.classList.remove("Btn_theme_regular"),e&&e.classList.add("Btn_theme_secondary");const n=document.querySelector("#vkidform__vkapp_signin a");n&&n.classList.remove("VkIdForm__button--hidden")};o.default.getRouter().addRoute((e=>{if("/"===e||e.startsWith("/login"))return!0}),(()=>{const e=document.querySelector(".VkIdForm");s.isIPad&&s.iosMajor>=13?(c(),l(),e&&e.classList.remove("VkIdForm--hidden")):(d?navigator.getInstalledRelatedApps().then((e=>{const n=Object.values(e).some((e=>"com.vkontakte.android"===e.id));return Promise.resolve(n)})):Promise.reject(!1)).then((n=>{n?l():(c(),(()=>{const e=document.querySelector("#vkidform__signin a");e&&e.classList.add("Btn_theme_regular"),e&&e.classList.remove("Btn_theme_secondary");const n=document.querySelector("#vkidform__vkapp_signin a");n&&n.classList.add("VkIdForm__button--hidden")})()),e&&e.classList.remove("VkIdForm--hidden")})).catch((()=>{c(),l(),e&&e.classList.remove("VkIdForm--hidden")}))}));var u=t(97349),_=t(50805),v=t(48268),h=t(54958),g=t(14275),m=t(93156),p=t(62641);var k=t(89798),w=t(39871),f=t(9223),I=t(35856),S=t(57141),U=t(20848),b=t(79764),j=t(72946);const A=new j.ProductionStatCollector,x=new j.ActionStatCollector(A),O=new j.RegistrationItemStatCollector(x);function V(){const e=document.querySelector(".VkIdSavedUsers__rows"),n=document.querySelector(".VkIdSavedUsers__showMore");e&&e.classList.remove("VkIdSavedUsers__rows--collapsed"),n&&(n.style.display="none")}let z="";function C(){let e;const n=new Promise(((n,t)=>{(0,I.onDomReady)((()=>{e=document.querySelector(".VkIdSavedUsers__pageBlock"),e?n():t()}))}));Promise.all([(0,k.login)("connect_get_saved_users_info"),n]).then((([n])=>{if(!(n&&n.users&&n.users.length&&n.auth_hash))return Promise.reject();z=n.auth_hash;const t=function(e){let n=[];if(e.stub){let t=0,i=e.count;for(;t<i;t++)n.push((0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__row"},{children:[(0,_.jsx)(h.Btn,Object.assign({theme:"none",size:"none",className:"VkIdSavedUsers__rowBtn"},{children:(0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__rowInner"},{children:[(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowLeft"},{children:(0,_.jsx)(g.OwnerAvatar,{size:48,mode:"image",src:""},void 0)}),void 0),(0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__rowMain"},{children:[(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowTitle"},{children:(0,_.jsx)("span",{className:"VkIdSavedUsers__rowTitleStub"},void 0)}),void 0),(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowSubtitle"},{children:(0,_.jsx)("span",{className:"VkIdSavedUsers__rowSubtitleStub"},void 0)}),void 0)]}),void 0)]}),void 0)}),void 0),(0,_.jsx)("div",{className:"VkIdSavedUsers__rowRight"},void 0)]}),void 0))}else if(e.users){let i=0,o=e.users.length;for(;i<o;i++)n.push((t=e.users[i],(0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__row","data-user-id":t.user_id},{children:[(0,_.jsx)(h.Btn,Object.assign({theme:"none",size:"none",className:"VkIdSavedUsers__rowBtn",onClick:["VkIdSavedUsers.onRowClick",t.user_id,t.hash]},{children:(0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__rowInner"},{children:[(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowLeft"},{children:(0,_.jsx)(g.OwnerAvatar,{size:48,mode:"image",src:t.photo},void 0)}),void 0),(0,_.jsxs)("div",Object.assign({className:"VkIdSavedUsers__rowMain"},{children:[(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowTitle"},{children:t.name}),void 0),t.subinfo?(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowSubtitle"},{children:t.subinfo.replace(/\*/g,"•")}),void 0):null]}),void 0)]}),void 0)}),void 0),(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rowRight"},{children:(0,_.jsx)(h.Btn,Object.assign({is_icon:!0,theme:"none",size:"none",className:"VkIdSavedUsers__rowRightBtn",onClick:["VkIdSavedUsers.onMenuClick",t.user_id],use_native_onclick:!0},{children:(0,_.jsx)(m.Icon16MoreVertical,{},void 0)}),void 0)}),void 0)]}),void 0)))}var t;return n.length?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(v.PageBlock,Object.assign({row:!0,className:"VkIdSavedUsers__pageBlock"},{children:[(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__title"},{children:(0,p.getLang)("mobile_login_saved_users_title")}),void 0),(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__subtitle"},{children:(0,p.getLang)("mobile_login_saved_users_subtitle")}),void 0),(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__rows VkIdSavedUsers__rows--collapsed"},{children:n}),void 0),e.count>3?(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__showMore"},{children:(0,_.jsx)(h.Btn,Object.assign({size:"large",theme:"secondary",stretch:!0,onClick:"VkIdSavedUsers.expandRows",use_native_onclick:!0},{children:(0,p.getLang)("mobile_login_saved_users_more")}),void 0)}),void 0):null]}),void 0)},void 0):(0,_.jsx)(_.Fragment,{},void 0)}({count:n.users.length,users:n.users}),i=w.default.html(t);e&&(e.insertAdjacentHTML("afterend",i),e.remove())})).catch((()=>{e&&e.remove()}))}function y(e){if(!e)return;const n=(0,_.jsx)(f.default,{children:(0,_.jsx)(f.ModalMenuBtn,Object.assign({onclick:["VkIdSavedUsers.deleteUser","this",e],icon:(0,_.jsx)("div",Object.assign({className:"VkIdSavedUsers__modalIcon"},{children:(0,_.jsx)(m.Icon28DeleteOutline,{},void 0)}),void 0)},{children:(0,U.getLang)("mobile_login_saved_users_delete")}),void 0)},void 0),t=w.default.elem(n);(0,f.open)(t)}function T(e,n){e&&(O.logEvent(j.RegistrationItemEventTypes.AUTH_SAVED_START,j.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:j.RegistrationFieldItemNames.SAVED_SOURCE,value:j.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}]),(0,k.login)("connect_auth_saved_users",{user_id:e,auth_hash:z,from:"carousel"}).then((e=>{if(!e.url)return Promise.reject();location.href=e.url})).catch((()=>{b.default.post("/join.php?act=vkid_saved_auth",{user_id:e,auth_hash:z,user_hash:n},{onDone(e){e.error&&S.init({type:S.SNACKBAR_TYPE_ERROR,text:e.error})},onFail:()=>(S.init({type:S.SNACKBAR_TYPE_ERROR,text:(0,U.getLang)("mobile_unknown_error")}),!0)})})))}function M(e,n){if(!n)return;O.logEvent(j.RegistrationItemEventTypes.DROP_ACCOUNT_FROM_SAVED,j.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:j.RegistrationFieldItemNames.SAVED_SOURCE,value:j.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}]),(0,f.close)(e);const t=document.querySelector(`.VkIdSavedUsers__row[data-user-id="${n}"]`);if(t&&t.parentNode&&t.remove(),!document.querySelectorAll(".VkIdSavedUsers__row").length){const e=document.querySelector(".VkIdSavedUsers__pageBlock");e&&e.parentNode&&e.remove()}(0,k.login)("connect_delete_saved_users",{user_id:n,auth_hash:z})}window.VkIdSavedUsers=i;var L=t(41313);window.Unauthorized2=u.Unauthorized,(0,L.onServerEvent)("VkIdSavedUsers/init").watch((()=>{C()}))},97349:function(e,n,t){"use strict";t.d(n,{Unauthorized:function(){return m},getOpenInAppMyTrackerUrl:function(){return p}});var i=t(64871),o=t(9223),s=t(39871),a=t(40517),r=t(72946),d=t(71437),c=t(76567),l=t(97109);function u(e,n){if(_(),!e)return;const t=n=>{r.marketingTransitionItemStat.logEvent(a.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,n,e.unauth_action_box.action,window.location.href)},c=(0,i.UnauthorizedActionModal)({type:e.unauth_action_box.action,iconType:e.unauth_action_box.icon_type,iconUrl:e.unauth_action_box.icon_url,title:e.unauth_action_box.header,description:e.unauth_action_box.text,loginUrl:e.sign_in_url,joinUrl:e.sign_up_url,showOpenInApp:e.show_open_in_app,openInAppUrl:e.open_in_app_url}),l=(0,o.default)({body:c});let u=!1;const v=()=>{u||n&&n(),t(a.MarketingTransitionItemEventType.CLOSE)};(0,o.open)(s.default.elem(l),!0,"",{onClose:()=>{v()},onOverlayClick:()=>{setTimeout((()=>v()),500)}});const h=(0,d.$)(".UnauthorizedActionModal__openInAppButton"),g=(0,d.$)(".UnauthorizedActionModal__signInTextLink"),m=(0,d.$)(".UnauthorizedActionModal__signUpTextLink"),k=(0,d.$)('.UnauthorizedActionModal .Btn[data-type="login"]'),w=(0,d.$)('.UnauthorizedActionModal .Btn[data-type="join"]'),f=e=>{window.ModalMenu.close(e)},I=(e,n)=>{const i=e.target;u=!0,t(n),f(i),e.preventDefault(),e.stopPropagation(),setTimeout((()=>window.nav.go(i)),110)};[k,g].forEach((e=>{e?.addEventListener("click",(e=>{I(e,a.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),[w,m].forEach((e=>{e?.addEventListener("click",(e=>{I(e,a.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),h?.addEventListener("click",(e=>{const n=e.target;u=!0,t(a.MarketingTransitionItemEventType.CLICK_OPEN_IN_APP),f(n),e.preventDefault(),e.stopPropagation();const i=n.getAttribute("href");if(i){const e=p(i);setTimeout((()=>window.nav.go(e)),110)}})),t(a.MarketingTransitionItemEventType.OPEN)}function _(){window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,write_ab:1})}let v,h=0,g=!1;const m={onActionClick:function(e,n,t){window.UnauthorizedFeed?.isActive?window.UnauthorizedFeed.onAction(e,n):window.vk.id||(e?.preventDefault(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:n,object:t,to:window.location.href.replace(window.location.origin,"")},{onDone:e=>{e.unauth_action_box&&u(e)}}))},onMoreBoxActionClick:function(e,n){e&&(n&&r.marketingTransitionItemStat.logEvent(a.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,n,a.MarketingTransitionItemSourceType.MORE,window.location.href),e.preventDefault(),e.stopPropagation(),setTimeout((()=>window.nav.go(e.target)),110))},initScrollMoreBox:function(e){const n=()=>{g=!1,window.removeEventListener("scroll",v)};n(),h=Date.now(),v=()=>{if(g||Date.now()-h<2e3)return;if(window.cur.unauthScrollMoreBox)return;window.pageYOffset>=2*window.innerHeight&&(g=!0,u(e))},window.addEventListener("scroll",v),(0,l.pushNavDestroy)((()=>n()))},showMoreBox:function(e,n,t,i){e&&e.preventDefault(),_(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:"more",owner_id:n,source:t,to:window.location.href.replace(window.location.origin,"")},{loader:!0,onDone:e=>{e.unauth_action_box&&u(e,i)}})},writeUnauhActionBoxABGroup:_};function p(e){const n=e.includes("?")?"&":"?";return`${e}${n}unauth_id=${(0,c.getCookie)("remixstid")}&target_url=${encodeURIComponent(window.location.href)}`}},97109:function(e,n,t){"use strict";function i(e){window.cur&&window.cur.destroy&&window.cur.destroy.push(e)}t.d(n,{pushNavDestroy:function(){return i}})}},function(e){"use strict";e.O(0,[1216,9522,4952,8,6320,2450,9873,5411,220,8156,7342,8040,3380,91,5333,8331,8592],(function(){return n=36820,e(e.s=n);var n}));e.O()}]);